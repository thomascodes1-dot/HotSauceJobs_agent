{% extends "base.html" %}

{% block content %}
<div class="bg-blue-100 py-12 mb-8 rounded-lg shadow-md">
    <div class="container mx-auto px-4">
        <h1 class="text-4xl font-bold text-blue-800 mb-4">Find Your Dream Job</h1>
        <p class="text-xl text-blue-600 mb-8">Explore opportunities from top companies in various industries</p>
        <form action="{{ url_for('main.search') }}" method="GET" class="flex max-w-md">
            <input type="text" name="q" placeholder="Enter job title or keywords" class="flex-grow px-4 py-2 rounded-l-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <button type="submit" class="bg-blue-500 text-white px-6 py-2 rounded-r-lg hover:bg-blue-600 transition duration-300">Search</button>
        </form>
    </div>
</div>

<h2 class="text-3xl font-bold mb-6 text-gray-800">Featured Companies</h2>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for company in companies %}
    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition duration-300 border-l-4 border-blue-500">
        <h3 class="text-xl font-semibold mb-2 text-blue-600">{{ company.name }}</h3>
        <p class="text-gray-600 mb-4 company-description">{{ company.description[:100] }}{% if company.description|length > 100 %}...{% endif %}</p>
        <div class="flex justify-between items-center">
            <a href="{{ url_for('main.company', company_id=company.id) }}" class="inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-300">View Jobs</a>
            <button class="expand-btn text-blue-500 focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
            </button>
        </div>
    </div>
    {% endfor %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const companies = document.querySelectorAll('.bg-white');
    
    companies.forEach(company => {
        const expandBtn = company.querySelector('.expand-btn');
        const description = company.querySelector('.company-description');
        const fullDescription = description.textContent;
        
        expandBtn.addEventListener('click', function() {
            company.classList.toggle('expanded');
            
            if (company.classList.contains('expanded')) {
                description.textContent = fullDescription;
                expandBtn.querySelector('svg').style.transform = 'rotate(180deg)';
            } else {
                description.textContent = fullDescription.substring(0, 100) + (fullDescription.length > 100 ? '...' : '');
                expandBtn.querySelector('svg').style.transform = 'rotate(0deg)';
            }
        });
    });
});
</script>
{% endblock %}
